(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{342:function(t,e,a){var r=a(510);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(23).default)("66ab3bfa",r,!1,{sourceMap:!1})},510:function(t,e,a){(t.exports=a(24)(!1)).push([t.i,".pageview[data-v-4e3699cd]{width:100%;height:100%}.tableview[data-v-4e3699cd]{margin-top:20px}.setterview[data-v-4e3699cd]{margin-top:50px;text-align:right}",""])},511:function(t,e,a){"use strict";var r=a(342);a.n(r).a},555:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pageview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry||t.isOther,expression:"isQuiry || isOther"}]},[a("h1",{directives:[{name:"show",rawName:"v-show",value:t.isQuiry,expression:"isQuiry"}],staticStyle:{color:"black"}},[t._v("我的询价单-导入询价单")]),t._v(" "),a("h1",{directives:[{name:"show",rawName:"v-show",value:t.isOther,expression:"isOther"}],staticStyle:{color:"black"}},[t._v("引用其他公司订单-导入")]),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("span",[t._v("标题："+t._s(t.quiryTitle))]),t._v(" "),a("span",{staticStyle:{margin:"0 15px"}},[t._v("创建时间："+t._s(t.quiryCrateTime))]),t._v(" "),a("span",[t._v("订单编号："+t._s(t.quiryOrder))]),t._v(" "),a("span",{staticStyle:{"margin-left":"15px"}},[t._v("状态："+t._s(t.quiryState))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isPurchase,expression:"isPurchase"}]},[a("h1",{staticStyle:{color:"black"}},[t._v("导入采购商品")])]),t._v(" "),a("div",{staticClass:"tableview"},[a("el-table",{staticStyle:{width:"1800px"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{resizable:!1,fixed:"",label:"选择",width:"60px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{on:{change:t.selectGoods},model:{value:e.row.select,callback:function(a){t.$set(e.row,"select",a)},expression:"tableData.row.select"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,fixed:"",prop:"num",label:"序号",width:"60px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"pictureAddress",label:"缩略图",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{width:"60",height:"60",src:t.row.pictureAddress}})]}}])}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"productId",label:"土猫编号",width:"80px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"brand",label:"品牌",width:"80px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"productType",label:"商品类型",width:"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"productName",label:"商品名称",width:"200px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"unitPrice",label:"单价（元）",width:"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"amount",label:"数量",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{align:"center",size:"small"},on:{change:function(a){t.inputCount(e.$index)}},model:{value:e.row.amount,callback:function(a){t.$set(e.row,"amount",a)},expression:"tableData.row.amount"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"total",label:"小计",width:"100px",align:"center"}})],1)],1),t._v(" "),a("div",{staticClass:"setterview"},[a("el-checkbox",{staticStyle:{"margin-right":"20px"},attrs:{change:t.selectAll()},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}},[t._v("全选")]),t._v(" "),t.isPurchaseSettlePow?a("el-button",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{click:function(e){t.balance()}}},[t._v("去结算")]):t._e(),t._v(" "),t.isQuiry?t._e():a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small"},on:{click:t.addCart}},[t._v("加入购物车")])],1)])};r._withStripped=!0;var i=a(2),s=a.n(i),l=a(15),n=a.n(l),o=a(4),c=a.n(o),u=a(11),d=a(16),h=a(6),p=a(3),b={data:function(){return{isQuiry:!1,isPurchase:!1,isOther:!1,quiryTitle:"新店首配需求单",quiryCrateTime:"",quiryOrder:"",quiryState:"",isSelectAll:!0,tableData:[],isPurchaseSettlePow:!1}},components:{},computed:{},mounted:function(){var t=this.$store.state.contain_power;t&&JSON.parse(t).isPurchaseSettlePow&&(this.isPurchaseSettlePow=JSON.parse(t).isPurchaseSettlePow),console.log("tang------------------\x3e",this.$route.query.type+"++++++++++"+this.$route.query.id),"quiry"==this.$route.query.type?(this.isQuiry=!0,this.queryQuiryList(this.$route.query.id)):"purchase"==this.$route.query.type?(this.isPurchase=!0,this.getPurchaseOrder()):"other"==this.$route.query.type&&(this.isOther=!0,this.getOtherPurchaseOrder(this.$route.query.id))},methods:{selectAll:function(){if(this.isSelectAll)for(var t=0;t<this.tableData.length;t++)this.tableData[t].select=!0;else for(var e=0;e<this.tableData.length;e++)this.tableData[e].select=!1},selectGoods:function(t){for(var e=!1,a=0;a<this.tableData.length;a++)this.tableData[a].select||(e=!0);this.isSelectAll=!e},inputCount:function(t){this.tableData[t].total=this.tableData[t].unitPrice*this.tableData[t].amount,this.tableData[t].total=this.tableData[t].total.toFixed(2)},balance:function(){var t=[],e=[],a=!1;return this.tableData.forEach(function(r){r.select&&(a=!0,r.orderId=r.orderId,r.colour=r.specification,r.imageUrl=r.pictureAddress,r.name=r.productName,r.num=r.amount,r.price=r.unitPrice,r.sum=r.unitPrice*r.amount,t.push(r),r.amount||e.push(r.productId))}),a?0!=e.length?this.$message.error("土猫编号为"+e.toString()+"的商品数量不能为空！"):(this.$store.commit(p.MutationTypes.RECORD_ORDER_PRODUCTLIST,t),void this.$router.push("/confirmorder")):this.$message.error("请选择需要去结算的商品!")},addCart:function(){for(var t=!1,e=[],a=[],r=0;r<this.tableData.length;r++)this.tableData[r].select&&(t=!0,this.tableData[r].amount||e.push(this.tableData[r].productId),a.push(this.tableData[r]));return t?0!=e.length?this.$message.error("土猫编号为"+e.toString()+"的商品数量不能为空！"):void(0!=a.length&&a.forEach(function(t){this.QueryAddCart(t.productId,t.amount)})):this.$message.error("请选择需要添加到购物车的商品!")},QueryAddCart:function(){var t=c()(s.a.mark(function t(e,a){var r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={cart:[{productId:e,pcount:num}]},i=n()(r),t.next=4,Object(d.a)(this,u.a.AddCart,i);case 4:t.sent&&(this.$message.success("购物车加入成功"),this.$router.push("/cart"));case 6:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),lookUpSelect:function(){var t=this;return function(e){for(var a=0;a<t.tableData.length;a++)if(t.tableData[a].select)return!0}},queryQuiryList:function(){var t=c()(s.a.mark(function t(e){var a,r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={orderId:e},t.next=3,Object(d.a)(this,u.a.GetDemandOrderUrl,a,"GET");case 3:if(r=t.sent){for(i=0;i<r.data.list.length;i++)r.data.list[i].num=i+1,r.data.list[i].unitPrice=r.data.list[i].realPrice?r.data.list[i].realPrice.toFixed(2):r.data.list[i].unitPrice.toFixed(2),r.data.list[i].total=r.data.list[i].unitPrice*r.data.list[i].amount,r.data.list[i].total=r.data.list[i].total.toFixed(2),r.data.list[i].select=!0;this.tableData=r.data.list,this.quiryCrateTime=Object(h.i)(r.data.demandOrderDate),this.quiryOrder=r.data.orderId,this.quiryTitle=r.data.orderName,this.quiryState=Object(h.f)(r.data.orderStatus)}case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getPurchaseOrder:function(){var t=JSON.parse(Object(h.g)(p.LoaclstorgeKeys.PORTPURCHASEORDER));if(t){for(var e=0;e<t.length;e++)t[e].select=!0,t[e].num=e+1,t[e].unitPrice=t[e].realPrice?t[e].realPrice.toFixed(2):t[e].unitPrice.toFixed(2),t[e].total=t[e].unitPrice*t[e].amount,t[e].total=t[e].total.toFixed(2);this.tableData=t}},getOtherPurchaseOrder:function(){var t=c()(s.a.mark(function t(e){var a,r,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={orderId:e},t.next=3,Object(d.a)(this,u.a.PurchaseOrderDetailUrl,a);case 3:if((r=t.sent)&&(this.quiryTitle=r.data.orderName,this.quiryCrateTime=Object(h.i)(r.data.demandOrderDate),this.quiryOrder=r.data.orderId,this.quiryState=Object(h.e)(r.data.orderStatus),r.data.list)){for(i=0;i<r.data.list.length;i++)r.data.list[i].num=i+1,r.data.list[i].unitPrice=r.data.list[i].realPrice?r.data.list[i].realPrice.toFixed(2):r.data.list[i].unitPrice.toFixed(2),r.data.list[i].total=r.data.list[i].unitPrice*r.data.list[i].amount,r.data.list[i].total=r.data.list[i].total.toFixed(2),r.data.list[i].select=!0;this.tableData=r.data.list}case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},v=(a(511),a(25)),m=Object(v.a)(b,r,[],!1,null,"4e3699cd",null);e.default=m.exports}}]);