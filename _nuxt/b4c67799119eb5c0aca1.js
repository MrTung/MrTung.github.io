(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{314:function(t,a,e){var i=e(455);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(23).default)("100fca98",i,!1,{sourceMap:!1})},455:function(t,a,e){(t.exports=e(24)(!1)).push([t.i,".tableview[data-v-0b0a5a8b]{margin-top:15px}.auditview[data-v-0b0a5a8b]{display:grid;margin-top:60px;color:#000}.auditview_find[data-v-0b0a5a8b]{margin:10px 0}.auditview_ex[data-v-0b0a5a8b]{display:inline}",""])},456:function(t,a,e){"use strict";var i=e(314);e.n(i).a},576:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pageview"},[e("div",[e("h1",{staticStyle:{color:"black","font-size":"16px","margin-bottom":"10px"}},[t._v("采购单审核-"+t._s(t.typeName))]),t._v(" "),e("span",[t._v("订单编号:"+t._s(t.orderId))])]),t._v(" "),e("div",{staticClass:"tableview"},[e("el-table",{staticStyle:{width:"1800px"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{resizable:!1,fixed:"",prop:"num",label:"序号",width:"60px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"pictureAddress",label:"缩略图",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{attrs:{width:"60",height:"60",src:t.row.pictureAddress}})]}}])}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"productId",label:"土猫编号",width:"80px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"brand",label:"品牌",width:"80px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"productType",label:"商品类型",width:"100px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"productName",label:"商品名称",width:"200px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"unitPrice",label:"单价（元）",width:"100px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"amount",label:"数量",width:"100px",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{resizable:!1,prop:"totalPrice",label:"小计",width:"100px",align:"center"}})],1),t._v(" "),e("div",{staticStyle:{float:"right","margin-top":"15px"}},[e("span",{staticStyle:{color:"black","font-size":"16px","font-weight":"bold"}},[t._v("总计：")]),t._v(" "),e("span",{staticStyle:{color:"black","font-size":"18px","font-weight":"bold"}},[t._v(t._s(t.totalAmount))])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLook,expression:"isLook"}],staticClass:"auditview"},[e("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.auditPerson)+"审核")]),t._v(" "),e("span",{staticStyle:{margin:"10px 0"}},[t._v("审核结果：   "+t._s(t.findAudit))]),t._v(" "),e("span",[t._v("补充说明：   "+t._s(t.remaind))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isAudit,expression:"isAudit"}],staticClass:"auditview"},[e("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.auditPerson)+"审核")]),t._v(" "),e("div",{staticClass:"auditview_find"},[e("span",{staticStyle:{margin:"10px 0"}},[t._v("审核结果：  ")]),t._v(" "),e("el-radio",{attrs:{label:"approve"},on:{change:t.radioChange},model:{value:t.auditFind,callback:function(a){t.auditFind=a},expression:"auditFind"}},[t._v("通过")]),t._v(" "),e("el-radio",{attrs:{label:"pending_refuse"},on:{change:t.radioChange},model:{value:t.auditFind,callback:function(a){t.auditFind=a},expression:"auditFind"}},[t._v("不通过")])],1),t._v(" "),e("div",{staticClass:"auditview_ex"},[e("span",{staticStyle:{"vertical-align":"top"}},[t._v("补充说明：  ")]),t._v(" "),e("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入补充说明内容"},model:{value:t.remaind,callback:function(a){t.remaind=a},expression:"remaind"}})],1),t._v(" "),e("div",[e("el-button",{staticStyle:{width:"150px","margin-top":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(a){t.BtnAudit()}}},[t._v(t._s(t.auditBtn))])],1)])])};i._withStripped=!0;var r=e(2),s=e.n(r),n=e(4),o=e.n(n),l=e(11),d=e(16),u=(e(6),{data:function(){return{isLook:!1,isAudit:!1,typeName:"",orderId:"",auditPerson:"总部",tableData:[],totalAmount:0,findAudit:"",auditFind:"approve",remaind:"",auditBtn:"审核通过支付订单"}},components:{},computed:{},mounted:function(){"look"==this.$route.query.type?this.typeName="查看":"audit"==this.$route.query.type&&(this.typeName="审核"),this.queryPurchaseList(this.$route.query.id)},methods:{queryPurchaseList:function(){var t=o()(s.a.mark(function t(a){var e,i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={orderId:a},t.next=3,Object(d.a)(this,l.a.QueryPurchaseOrderUrl,e);case 3:if(i=t.sent){for(this.orderId=i.data.list[0].orderId,this.tableData=i.data.list,r=0;r<this.tableData.length;r++)this.tableData[r].num=r+1,this.tableData[r].unitPrice=this.tableData[r].realPrice?this.tableData[r].realPrice.toFixed(2):this.tableData[r].unitPrice.toFixed(2),this.tableData[r].totalPrice=this.tableData[r].totalPrice.toFixed(2),this.totalAmount=(parseFloat(this.totalAmount)+parseFloat(this.tableData[r].totalPrice)).toFixed(2);"pending"==i.data.orderStatus&&"audit"==this.$route.query.type&&(this.isAudit=!0),"approve"!=i.data.orderStatus&&"pending_refuse"!=i.data.orderStatus||(this.isLook=!0),this.auditPerson=i.data.username,this.isLook&&("approve"==i.data.orderStatus?this.findAudit="通过":this.findAudit="不通过",this.remaind=i.data.audit)}case 5:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),radioChange:function(t){this.auditBtn="approve"==t?"审核通过支付订单":"审核驳回"},BtnAudit:function(){var t=o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.remaind){t.next=2;break}return t.abrupt("return",this.$message.error("请输入补充说明内容"));case 2:return a={orderId:this.orderId,orderStatus:this.auditFind,audit:this.remaind},t.next=5,Object(d.a)(this,l.a.PurchaseOrderStUrl,a);case 5:t.sent&&(this.$message.success("审核完成"),this.$router.go(-1));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}),c=(e(456),e(25)),p=Object(c.a)(u,i,[],!1,null,"0b0a5a8b",null);a.default=p.exports}}]);