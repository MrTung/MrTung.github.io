(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{331:function(t,e,a){var i=a(490);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(23).default)("15ce65ea",i,!1,{sourceMap:!1})},490:function(t,e,a){(t.exports=a(24)(!1)).push([t.i,".pageview[data-v-a7147140]{width:100%;height:100%}.tableview[data-v-a7147140]{margin-top:20px}.setterview[data-v-a7147140]{margin-top:50px;text-align:right}",""])},491:function(t,e,a){"use strict";var i=a(331);a.n(i).a},563:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pageview"},[a("div",[a("h1",{staticStyle:{color:"black"}},[t._v("采购单管理-编辑")]),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("span",{staticStyle:{margin:"0 15px"}},[t._v("采购时间："+t._s(t.quiryCrateTime))]),t._v(" "),a("span",[t._v("采购编号："+t._s(t.quiryOrder))]),t._v(" "),a("span",{staticStyle:{margin:"0 15px"}},[t._v("商品个数："+t._s(t.quirycount))]),t._v(" "),a("span",[t._v("状态："+t._s(t.quiryState))]),t._v(" "),a("span",{staticStyle:{"margin-left":"15px"}},[t._v("分公司名称："+t._s(t.quirycompany))])])]),t._v(" "),a("div",{staticClass:"tableview"},[a("el-table",{staticStyle:{width:"1800px"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{resizable:!1,prop:"num",label:"序号",width:"60px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"pictureAddress",label:"缩略图",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{width:"60",height:"60",src:t.row.pictureAddress}})]}}])}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"productId",label:"土猫编号",width:"80px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"brand",label:"品牌",width:"80px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"productType",label:"商品类型",width:"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"productName",label:"商品名称",width:"200px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"unitPrice",label:"单价（元）",width:"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,fixed:"right",prop:"amount",label:"数量",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{align:"center",size:"small"},on:{change:function(a){t.inputChange(e.$index)}},model:{value:e.row.amount,callback:function(a){t.$set(e.row,"amount",a)},expression:"tableData.row.amount"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,fixed:"right",prop:"totalPrice",label:"小计",width:"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,fixed:"right",label:"操作",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){t.deleteTable(e.$index)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"contentview_table_add"},[a("span",[t._v("新增商品")]),t._v(" "),a("el-autocomplete",{staticStyle:{width:"250px","margin-top":"15px"},attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入商品编号或商品名称搜索添加",size:"small"},on:{select:t.handleSelect},model:{value:t.selectGood,callback:function(e){t.selectGood=e},expression:"selectGood"}}),t._v(" "),a("span",[t._v("可直接在左侧搜索框搜索选择商品添加")])],1),t._v(" "),a("el-button",{staticStyle:{width:"100px",float:"right",top:"10px"},attrs:{size:"small",type:"primary"},on:{click:function(e){t.balance()}}},[t._v("提交预订单")])],1)};i._withStripped=!0;var r=a(45),n=a.n(r),l=a(2),s=a.n(l),o=a(4),c=a.n(o),u=a(11),d=a(16),p=a(6),h=a(3),b={data:function(){return{quiryCrateTime:"",quiryOrder:"",quirycount:"",quiryState:"",quirycompany:"",selectGood:"",tableData:[]}},components:{},computed:{},mounted:function(){console.log("tang------------------\x3e",this.$route.query.id),this.queryPurchaseList(this.$route.query.id)},methods:{balance:function(){var t=[];this.tableData.forEach(function(e){e.cartId=e.orderId,e.colour=e.specification,e.imageUrl=e.pictureAddress,e.name=e.productName,e.num=e.amount,e.price=e.unitPrice,e.sum=e.unitPrice*e.amount,t.push(e)}),this.$store.commit(h.MutationTypes.RECORD_ORDER_PRODUCTLIST,t),this.$router.push("/confirmorder")},queryPurchaseList:function(){var t=c()(s.a.mark(function t(e){var a,i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={orderId:e},t.next=3,Object(d.a)(this,u.a.QueryPurchaseOrderUrl,a);case 3:if((i=t.sent)&&(this.quiryCrateTime=Object(p.h)(i.data.gmtCreate),this.quiryOrder=i.data.orderId,this.quirycount=i.data.list.length,this.quiryState=Object(p.e)(i.data.orderStatus),this.quirycompany="",i.data.list))for(this.tableData=i.data.list,r=0;r<i.data.list.length;r++)i.data.list[r].num=r+1,i.data.list[r].unitPrice=i.data.list[r].unitPrice.toFixed(2),i.data.list[r].totalPrice=i.data.list[r].totalPrice.toFixed(2);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),querySearchAsync:function(t,e){t.length>1&&this.$http.get(u.a.QueryProductInfoUrl+"?id="+t).then(function(t){if(t.body.data){var a=!0,i=!1,r=void 0;try{for(var l,s=n()(t.body.data);!(a=(l=s.next()).done);a=!0){var o=l.value;o.value=o.productName}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return e(t.body.data)}},function(t){console.log("tang-----------------\x3e错了")})},handleSelect:function(t){this.tableData&&this.tableData.forEach(function(e){if(e.productId==t.productId)return this.$message.error("商品已存在")}),this.tableData.push(t)},inputChange:function(t){this.tableData&&(this.tableData[t].totalPrice=this.tableData[t].unitPrice*this.tableData[t].amount,this.tableData[t].totalPrice=this.tableData[t].totalPrice.toFixed(2))},deleteTable:function(t){this.tableData.splice(t,t+1)}}},m=(a(491),a(25)),v=Object(m.a)(b,i,[],!1,null,"a7147140",null);e.default=v.exports}}]);